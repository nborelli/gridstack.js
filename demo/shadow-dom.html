<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GridStack Custom Element Demo</title>
    <style>
      body {
        font-family: Arial, Helvetica, sans-serif;
      }
    </style>
  </head>
  <body>
    <h2>Gridstack.js Inside Custom Element with Shadow DOM</h2>
    <aside>
      This is an example of using Gridstack fully inside a custom element. All
      styling of gridstack.js is fully encapsulated within the Shadow DOM.
    </aside>
    <!-- Use the custom element -->
    <demo-gridstack></demo-gridstack>

    <script type="module">
      import "https://unpkg.com/gridstack@latest/dist/gridstack-h5.js";

      class HTMLDemoGridStack extends HTMLElement {
        constructor() {
          super();
          this.attachShadow({ mode: "open" });
        }

        connectedCallback() {
          const styleBlocks = `
            <link href="https://unpkg.com/gridstack@latest/dist/gridstack.min.css" rel="stylesheet" />
            <style type="text/css">
            :host { display: block; }
            .grid-stack {
                background-color: #fafad2;
            }
            .grid-stack-item-content {
                background-color: #18bc9c;
            }
            </style>
          `;

          this.shadowRoot.innerHTML = `${styleBlocks}<div class="grid-stack"></div>`;
          const gridEl = this.shadowRoot.querySelector("div");
          const items = [
            { content: "my first widget" }, // will default to location (0,0) and 1x1
            { w: 2, content: "another longer widget!" }, // will be placed next at (1,0) and 2x1
            { content: "3rd Widget" },
          ];
          const grid = GridStack.init(
            {
              styleInHead: false,
              draggable: {
                // This must be set to "parent" or the shadow root for drag re-ordering to work.
                appendTo: "parent",
              },
              dragInOptions: {
                appendTo: "parent",
              },
              cellHeight: 100,
            },
            gridEl
          );
          grid.load(items);
        }
      }

      customElements.define("demo-gridstack", HTMLDemoGridStack);
    </script>
  </body>
</html>
